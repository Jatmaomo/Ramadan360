<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ramadan 360 Ultimate | Knowledge & Devotion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:ital@0;1&family=Inter:wght@300;400;600;700&display=swap');
        :root { --primary: #064e3b; --secondary: #fbbf24; --accent: #10b981; }
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; -webkit-tap-highlight-color: transparent; }
        .arabic-text { font-family: 'Amiri', serif; direction: rtl; }
        .glass-card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 4px 20px -2px rgba(0, 0, 0, 0.05); }
        .tasbeeh-circle { width: 200px; height: 200px; border-radius: 50%; background: radial-gradient(circle, #065f46 0%, #064e3b 100%); box-shadow: 0 10px 30px rgba(6, 78, 59, 0.3); }
        .nav-btn.active { color: var(--primary); transform: translateY(-4px); }
        .nav-btn.active i { color: var(--accent); }
        .loading-spinner { border: 2px solid #f3f3f3; border-top: 2px solid #10b981; border-radius: 50%; width: 16px; height: 16px; animation: spin 1s linear infinite; display: inline-block; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .page-section { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body class="pb-28 pt-16">

    <header class="fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-100 px-6 py-3 flex justify-between items-center">
        <div class="flex items-center gap-2">
            <div class="bg-emerald-900 text-amber-400 p-1.5 rounded-lg shadow-inner"><i class="fas fa-kaaba"></i></div>
            <h1 class="text-xl font-bold text-emerald-900">Ramadan<span class="text-emerald-500">360</span></h1>
        </div>
        <div id="live-time" class="text-sm font-bold text-slate-800 tracking-tighter">00:00:00</div>
    </header>

    <main id="app-content" class="container mx-auto max-w-2xl px-5">
        
        <!-- HOME -->
        <section id="page-home" class="page-section space-y-6 py-4">
            <div class="glass-card rounded-3xl p-6 bg-gradient-to-br from-white to-emerald-50 border border-emerald-100">
                <div class="flex items-center gap-2 mb-4">
                    <span class="p-2 bg-emerald-100 rounded-lg text-emerald-600">âœ¨</span>
                    <h3 class="font-bold text-emerald-900">AI Spiritual Counselor</h3>
                </div>
                <div class="space-y-3">
                    <textarea id="ai-input" rows="2" placeholder="Ask for Ramadan guidance..." class="w-full p-3 rounded-xl border border-emerald-100 bg-white text-sm focus:ring-2 focus:ring-emerald-500 outline-none"></textarea>
                    <button onclick="askGemini()" class="w-full py-3 bg-emerald-700 text-white rounded-xl font-bold text-sm flex items-center justify-center gap-2">
                         <span id="btn-text">Ask AI Counselor</span>
                         <span id="btn-loader" class="hidden loading-spinner"></span>
                    </button>
                    <div id="ai-response" class="hidden p-4 bg-white rounded-xl text-xs text-slate-700 border border-emerald-50 max-h-48 overflow-y-auto"></div>
                </div>
            </div>

            <div class="glass-card rounded-3xl p-8 text-center border-b-4 border-amber-400">
                <h3 class="text-xs font-bold text-emerald-600 uppercase tracking-widest mb-4">Daily Wisdom</h3>
                <p id="quote-display" class="text-lg font-medium text-slate-700 italic mb-8">"Fasting is a shield; it will protect you from the fire."</p>
                <div class="flex gap-3 justify-center">
                    <button onclick="newQuote()" class="p-3 bg-slate-100 rounded-full hover:rotate-180 transition-transform"><i class="fas fa-sync-alt text-emerald-700"></i></button>
                    <button onclick="shareToWhatsApp('wisdom')" class="px-6 py-3 bg-green-500 text-white rounded-2xl font-bold shadow-lg flex items-center gap-2 active:scale-95 transition-transform">
                        <i class="fab fa-whatsapp"></i> Share
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div onclick="navigateTo('stories')" class="glass-card p-5 rounded-2xl border-l-4 border-blue-500 cursor-pointer hover:bg-blue-50 transition-colors">
                    <i class="fas fa-feather-pointed text-blue-500 text-2xl mb-2"></i>
                    <h4 class="font-bold">Prophet Stories</h4>
                </div>
                <div onclick="navigateTo('prayers')" class="glass-card p-5 rounded-2xl border-l-4 border-red-500 cursor-pointer hover:bg-red-50 transition-colors">
                    <i class="fas fa-hands-praying text-red-500 text-2xl mb-2"></i>
                    <h4 class="font-bold">Daily Duas</h4>
                </div>
            </div>

            <!-- Enhanced Branding -->
            <div class="text-center pt-8 pb-4 opacity-70">
                <div class="flex items-center justify-center gap-2 mb-2">
                    <div class="h-px w-8 bg-slate-300"></div>
                    <span class="text-[10px] font-bold uppercase tracking-[0.2em]">Developing Team</span>
                    <div class="h-px w-8 bg-slate-300"></div>
                </div>
                <p class="text-xs font-bold text-emerald-800">Musa Muhammed â€¢ Habzak â€¢ Olubay â€¢ Med Tech Ibrahim</p>
                <p class="text-xs font-bold text-pink-600 mt-1"><i class="fas fa-heart"></i> Heart of Roheemah</p>
                <p class="text-[9px] font-medium text-slate-400 mt-2 uppercase tracking-widest">Knowledge â€¢ Devotion â€¢ Excellence</p>
            </div>
        </section>

        <!-- TRACKER -->
        <section id="page-tracker" class="page-section hidden py-6 space-y-6">
            <div class="bg-emerald-900 text-white p-6 rounded-3xl shadow-xl">
                <p class="text-emerald-300 text-xs font-bold tracking-widest">FASTING PROGRESS</p>
                <h2 id="tracker-stats" class="text-4xl font-bold my-2">0/30 Days</h2>
                <div class="w-full bg-emerald-800 h-2 rounded-full mt-4">
                    <div id="tracker-bar" class="bg-amber-400 h-full rounded-full transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>
            <div class="grid grid-cols-6 gap-3" id="days-grid"></div>
        </section>

        <!-- QUIZ -->
        <section id="page-quiz" class="page-section hidden py-6">
            <div id="quiz-intro" class="bg-indigo-900 text-white p-10 rounded-3xl text-center space-y-6">
                <div class="w-20 h-20 bg-indigo-800 rounded-full flex items-center justify-center mx-auto text-3xl text-amber-400">
                    <i class="fas fa-brain"></i>
                </div>
                <h2 class="text-3xl font-bold">50 Question Quiz</h2>
                <p class="text-indigo-200 text-sm">Test your knowledge of the Quran, Prophets, and Islamic History.</p>
                <button onclick="startQuiz()" class="bg-amber-400 text-indigo-900 px-10 py-4 rounded-2xl font-bold w-full hover:bg-amber-300 transition-colors">Start Quiz</button>
            </div>
            <div id="quiz-game" class="hidden glass-card p-6 rounded-3xl space-y-6 border-t-8 border-indigo-500">
                <div class="flex justify-between items-center text-[10px] font-bold uppercase text-indigo-600">
                    <span id="quiz-progress-text">Question 1/50</span>
                    <span id="quiz-score-live">Score: 0</span>
                </div>
                <div id="quiz-question" class="text-xl font-bold text-slate-800 leading-tight"></div>
                <div id="quiz-options" class="grid gap-3"></div>
            </div>
            <div id="quiz-result" class="hidden text-center p-8 space-y-6 animate-bounce">
                <h2 class="text-3xl font-bold text-emerald-800">Quiz Completed!</h2>
                <div id="final-score" class="text-7xl font-black text-amber-500">0/50</div>
                <p class="text-slate-500 font-medium">MashAllah! Great effort.</p>
                <button onclick="shareToWhatsApp('quiz')" class="bg-green-500 text-white px-10 py-5 rounded-2xl font-bold w-full flex items-center justify-center gap-3">
                    <i class="fab fa-whatsapp text-xl"></i> Share Score
                </button>
                <button onclick="navigateTo('home')" class="text-slate-400 text-sm font-bold uppercase">Back to Home</button>
            </div>
        </section>

        <!-- TASBEEH -->
        <section id="page-tasbeeh" class="page-section hidden py-6 text-center space-y-10">
            <h2 class="text-2xl font-bold text-emerald-900">Digital Tasbeeh</h2>
            <div class="flex flex-col items-center">
                <div onclick="incrementTasbeeh()" class="tasbeeh-circle mx-auto flex flex-col items-center justify-center cursor-pointer active:scale-95 transition-transform select-none">
                    <span id="tasbeeh-count" class="text-7xl font-bold text-white">0</span>
                    <span class="text-emerald-200 text-[10px] font-bold tracking-[0.3em] mt-2 uppercase">Tap</span>
                </div>
                <button onclick="resetTasbeeh()" class="mt-12 text-slate-400 text-xs font-bold border-b border-slate-300 pb-1">RESET COUNTER</button>
            </div>
        </section>

        <!-- ADHKAR -->
        <section id="page-adhkar" class="page-section hidden py-6 space-y-4">
            <h2 class="text-2xl font-bold text-emerald-900 px-2">Remembrance (Adhkar)</h2>
            <div id="adhkar-list" class="space-y-4"></div>
        </section>

        <!-- NAMES -->
        <section id="page-names" class="page-section hidden py-6 space-y-6">
            <h2 class="text-2xl font-bold text-emerald-900 px-2">99 Names of Allah</h2>
            <div id="names-grid" class="grid grid-cols-2 gap-3"></div>
        </section>

        <!-- STORIES -->
        <section id="page-stories" class="page-section hidden py-6 space-y-6">
            <h2 class="text-2xl font-bold text-emerald-900 px-2">Prophet Stories</h2>
            <div id="stories-list" class="space-y-4"></div>
        </section>

        <!-- PRAYERS -->
        <section id="page-prayers" class="page-section hidden py-6 space-y-6">
            <h2 class="text-2xl font-bold text-emerald-900 px-2">Essential Duas</h2>
            <div id="prayers-list" class="space-y-4"></div>
        </section>

    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-slate-100 flex justify-around items-center py-4 z-50">
        <button onclick="navigateTo('home')" class="nav-btn active flex flex-col items-center gap-1"><i class="fas fa-house"></i><span class="text-[8px] font-bold">HOME</span></button>
        <button onclick="navigateTo('tracker')" class="nav-btn flex flex-col items-center gap-1 text-slate-400"><i class="fas fa-calendar"></i><span class="text-[8px] font-bold">TRACK</span></button>
        <button onclick="navigateTo('tasbeeh')" class="nav-btn flex flex-col items-center gap-1 text-slate-400"><i class="fas fa-circle-notch"></i><span class="text-[8px] font-bold">TASBEEH</span></button>
        <button onclick="navigateTo('adhkar')" class="nav-btn flex flex-col items-center gap-1 text-slate-400"><i class="fas fa-heart"></i><span class="text-[8px] font-bold">ADHKAR</span></button>
        <button onclick="navigateTo('names')" class="nav-btn flex flex-col items-center gap-1 text-slate-400"><i class="fas fa-star"></i><span class="text-[8px] font-bold">NAMES</span></button>
        <button onclick="navigateTo('quiz')" class="nav-btn flex flex-col items-center gap-1 text-slate-400"><i class="fas fa-brain"></i><span class="text-[8px] font-bold">QUIZ</span></button>
    </nav>

    <script>
        const apiKey = "";
        const modelName = "gemini-2.5-flash-preview-09-2025";

        const names99 = [
            { a: "Allah", e: "The Greatest Name" }, { a: "Ar-Rahman", e: "The Most Gracious" },
            { a: "Ar-Raheem", e: "The Most Merciful" }, { a: "Al-Malik", e: "The King" },
            { a: "Al-Quddus", e: "The Most Holy" }, { a: "As-Salam", e: "The Source of Peace" },
            { a: "Al-Mu'min", e: "The Giver of Faith" }, { a: "Al-Muhaymin", e: "The Guardian" },
            { a: "Al-Aziz", e: "The Almighty" }, { a: "Al-Jabbar", e: "The Compeller" },
            { a: "Al-Mutakabbir", e: "The Supreme" }, { a: "Al-Khaliq", e: "The Creator" },
            { a: "Al-Bari", e: "The Evolver" }, { a: "Al-Musawwir", e: "The Fashioner" },
            { a: "Al-Ghaffar", e: "The Forgiver" }, { a: "Al-Qahhar", e: "The Subduer" },
            { a: "Al-Wahhab", e: "The Bestower" }, { a: "Ar-Razzaq", e: "The Provider" },
            { a: "Al-Fattah", e: "The Opener" }, { a: "Al-Alim", e: "The All-Knowing" },
            { a: "Al-Qabid", e: "The Withholder" }, { a: "Al-Basit", e: "The Expander" },
            { a: "Al-Khafid", e: "The Abaser" }, { a: "Ar-Rafi", e: "The Exalter" },
            { a: "Al-Mu'izz", e: "The Bestower of Honor" }, { a: "Al-Mudhill", e: "The Humiliator" },
            { a: "As-Sami", e: "The All-Hearing" }, { a: "Al-Basir", e: "The All-Seeing" },
            { a: "Al-Hakam", e: "The Judge" }, { a: "Al-Adl", e: "The Utterly Just" },
            { a: "Al-Latif", e: "The Gentle" }, { a: "Al-Khabir", e: "The All-Aware" },
            { a: "Al-Halim", e: "The Forbearing" }, { a: "Al-Azim", e: "The Magnificent" },
            { a: "Al-Ghafur", e: "The Forgiving" }, { a: "Ash-Shakur", e: "The Appreciative" },
            { a: "Al-Ali", e: "The Most High" }, { a: "Al-Kabir", e: "The Most Great" },
            { a: "Al-Hafiz", e: "The Preserver" }, { a: "Al-Muqit", e: "The Nourisher" },
            { a: "Al-Hasib", e: "The Accounter" }, { a: "Al-Jalil", e: "The Majestic" },
            { a: "Al-Karim", e: "The Generous" }, { a: "Ar-Raqib", e: "The Watchful" },
            { a: "Al-Mujib", e: "The Responsive" }, { a: "Al-Wasi", e: "The All-Pervading" },
            { a: "Al-Hakim", e: "The Wise" }, { a: "Al-Wadud", e: "The Loving" },
            { a: "Al-Majid", e: "The Glorious" }, { a: "Al-Ba'ith", e: "The Resurrector" },
            { a: "Ash-Shahid", e: "The Witness" }, { a: "Al-Haqq", e: "The Truth" },
            { a: "Al-Wakil", e: "The Trustee" }, { a: "Al-Qawi", e: "The Strong" },
            { a: "Al-Matin", e: "The Firm One" }, { a: "Al-Wali", e: "The Friend" },
            { a: "Al-Hamid", e: "The Praiseworthy" }, { a: "Al-Muhsi", e: "The Counter" },
            { a: "Al-Mubdi", e: "The Originator" }, { a: "Al-Mu'id", e: "The Restorer" },
            { a: "Al-Muhyi", e: "The Giver of Life" }, { a: "Al-Mumit", e: "The Bringer of Death" },
            { a: "Al-Hayy", e: "The Living" }, { a: "Al-Qayyum", e: "The Subsisting" },
            { a: "Al-Wajid", e: "The Perceiver" }, { a: "Al-Majid", e: "The Illustrious" },
            { a: "Al-Wahid", e: "The One" }, { a: "Al-Ahad", e: "The Unique" },
            { a: "As-Samad", e: "The Eternal" }, { a: "Al-Qadir", e: "The Able" },
            { a: "Al-Muqtadir", e: "The Powerful" }, { a: "Al-Muqaddim", e: "The Expediter" },
            { a: "Al-Mu'akhkhir", e: "The Delayer" }, { a: "Al-Awwal", e: "The First" },
            { a: "Al-Akhir", e: "The Last" }, { a: "Az-Zahir", e: "The Manifest" },
            { a: "Al-Batin", e: "The Hidden" }, { a: "Al-Wali", e: "The Patron" },
            { a: "Al-Muta'ali", e: "The Most Exalted" }, { a: "Al-Barr", e: "The Source of Good" },
            { a: "At-Tawwab", e: "The Relenting" }, { a: "Al-Muntaqim", e: "The Avenger" },
            { a: "Al-Afu", e: "The Pardoner" }, { a: "Ar-Ra'uf", e: "The Compassionate" },
            { a: "Malik-ul-Mulk", e: "The Owner of Sovereignty" }, { a: "Dhul-Jalal-wal-Ikram", e: "Lord of Majesty and Bounty" },
            { a: "Al-Muqsit", e: "The Equitable" }, { a: "Al-Jami", e: "The Gatherer" },
            { a: "Al-Ghani", e: "The Self-Sufficient" }, { a: "Al-Mughni", e: "The Enricher" },
            { a: "Al-Mani", e: "The Preventer" }, { a: "Ad-Darr", e: "The Distresser" },
            { a: "An-Nafi", e: "The Propitious" }, { a: "An-Nur", e: "The Light" },
            { a: "Al-Hadi", e: "The Guide" }, { a: "Al-Badi", e: "The Incomparable" },
            { a: "Al-Baqi", e: "The Everlasting" }, { a: "Al-Warith", e: "The Heir" },
            { a: "Ar-Rashid", e: "The Guide to Right Path" }, { a: "As-Sabur", e: "The Patient" }
        ];

        const adhkarData = [
            { a: "Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø§Ù„Ù„Ù‡Ù", e: "SubhanAllah", m: "Glory be to Allah (33x)" },
            { a: "Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù Ù„Ù„Ù‡Ù", e: "Alhamdulillah", m: "Praise be to Allah (33x)" },
            { a: "Ø§Ù„Ù„Ù‡Ù Ø£ÙŽÙƒÙ’Ø¨ÙŽØ±Ù", e: "Allahu Akbar", m: "Allah is the Greatest (33x)" },
            { a: "Ø£ÙŽØµÙ’Ø¨ÙŽØ­Ù’Ù†ÙŽØ§ ÙˆÙŽØ£ÙŽØµÙ’Ø¨ÙŽØ­ÙŽ Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ Ù„ÙÙ„ÙŽÙ‘Ù‡Ù", e: "Asbahna wa asbahal mulku lillah", m: "We have reached the morning and the sovereignty belongs to Allah" },
            { a: "Ø£ÙŽÙ…Ù’Ø³ÙŽÙŠÙ’Ù†ÙŽØ§ ÙˆÙŽØ£ÙŽÙ…Ù’Ø³ÙŽÙ‰ Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ Ù„ÙÙ„ÙŽÙ‘Ù‡Ù", e: "Amsayna wa amsal mulku lillah", m: "We have reached the evening and the sovereignty belongs to Allah" },
            { a: "Ù„ÙŽØ§ Ø¥ÙÙ„Ù°Ù‡ÙŽ Ø¥ÙÙ„ÙŽÙ‘Ø§ Ø§Ù„Ù„Ù‡Ù ÙˆÙŽØ­Ù’Ø¯ÙŽÙ‡Ù Ù„ÙŽØ§ Ø´ÙŽØ±ÙÙŠÙƒÙŽ Ù„ÙŽÙ‡Ù", e: "La ilaha illallah wahdahu...", m: "There is no god but Allah alone, He has no partner" },
            { a: "Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø§Ù„Ù„Ù‡Ù ÙˆÙŽØ¨ÙØ­ÙŽÙ…Ù’Ø¯ÙÙ‡Ù ØŒ Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø§Ù„Ù„Ù‡Ù Ø§Ù„Ù’Ø¹ÙŽØ¸ÙÙŠÙ…Ù", e: "SubhanAllahi wa bihamdihi...", m: "Glory and praise be to Allah, Glory be to Allah the Supreme" },
            { a: "Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙÙ…ÙŽÙ‘ ØµÙŽÙ„ÙÙ‘ ÙˆÙŽØ³ÙŽÙ„ÙÙ‘Ù…Ù’ Ø¹ÙŽÙ„ÙŽÙ‰ Ù†ÙŽØ¨ÙÙŠÙÙ‘Ù†ÙŽØ§ Ù…ÙØ­ÙŽÙ…ÙŽÙ‘Ø¯Ù", e: "Allahumma salli wa sallim...", m: "O Allah, send prayers and peace upon our Prophet Muhammad (10x)" },
            { a: "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ Ù„ÙŽØ§ ÙŠÙŽØ¶ÙØ±ÙÙ‘ Ù…ÙŽØ¹ÙŽ Ø§Ø³Ù’Ù…ÙÙ‡Ù Ø´ÙŽÙŠÙ’Ø¡ÙŒ", e: "Bismillahi-lladhi la yadurru...", m: "In the name of Allah, with whose name nothing can cause harm" },
            { a: "Ø£ÙŽØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙŽÙ„ÙÙ…ÙŽØ§ØªÙ Ø§Ù„Ù„Ù‡Ù Ø§Ù„ØªÙŽÙ‘Ø§Ù…ÙŽÙ‘Ø§ØªÙ Ù…ÙÙ†Ù’ Ø´ÙŽØ±ÙÙ‘ Ù…ÙŽØ§ Ø®ÙŽÙ„ÙŽÙ‚ÙŽ", e: "A'udhu bikalimatillahi-tammati...", m: "I seek refuge in the perfect words of Allah from the evil of what He has created" },
            { a: "ÙŠÙŽØ§ Ø­ÙŽÙŠÙÙ‘ ÙŠÙŽØ§ Ù‚ÙŽÙŠÙÙ‘ÙˆÙ…Ù Ø¨ÙØ±ÙŽØ­Ù’Ù…ÙŽØªÙÙƒÙŽ Ø£ÙŽØ³Ù’ØªÙŽØºÙÙŠØ«Ù", e: "Ya Hayyu Ya Qayyum...", m: "O Ever Living, O Self-Subsisting, by Your mercy I seek help" },
            { a: "Ø­ÙŽØ³Ù’Ø¨ÙÙŠÙŽ Ø§Ù„Ù„Ù‡Ù Ù„ÙŽØ§ Ø¥ÙÙ„Ù°Ù‡ÙŽ Ø¥ÙÙ„ÙŽÙ‘Ø§ Ù‡ÙÙˆÙŽ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡Ù ØªÙŽÙˆÙŽÙƒÙŽÙ‘Ù„Ù’ØªÙ", e: "Hasbiyallahu la ilaha illa Hu...", m: "Allah is sufficient for me; there is no god but He. In Him I trust" },
            { a: "Ø£ÙŽØ³Ù’ØªÙŽØºÙ’ÙÙØ±Ù Ø§Ù„Ù„Ù‡ÙŽ ÙˆÙŽØ£ÙŽØªÙÙˆØ¨Ù Ø¥ÙÙ„ÙŽÙŠÙ’Ù‡Ù", e: "Astaghfirullaha wa atubu ilayh", m: "I seek Allah's forgiveness and turn to Him in repentance (100x)" },
            { a: "Ø±ÙŽØ¶ÙÙŠØªÙ Ø¨ÙØ§Ù„Ù„Ù‡Ù Ø±ÙŽØ¨Ù‹Ù‘Ø§ ÙˆÙŽØ¨ÙØ§Ù„Ù’Ø¥ÙØ³Ù’Ù„ÙŽØ§Ù…Ù Ø¯ÙÙŠÙ†Ù‹Ø§", e: "Raditu billahi Rabban...", m: "I am pleased with Allah as my Lord, Islam as my religion" }
        ];

        const storiesData = [
            { t: "Prophet Adam (AS)", c: "The first human and Prophet created by Allah from clay, taught the names of all things." },
            { t: "Prophet Nuh (AS)", c: "Called his people to Tawhid for 950 years and built the Great Ark to save the believers." },
            { t: "Prophet Ibrahim (AS)", c: "The Friend of Allah who stood against idolatry and built the Kaaba with Ismail (AS)." },
            { t: "Prophet Musa (AS)", c: "Spoke to Allah directly, split the Red Sea, and led Bani Isra'il out of tyranny." },
            { t: "Prophet Yusuf (AS)", c: "Known for his beauty and dreams, sold into slavery but rose to be the treasurer of Egypt." },
            { t: "Prophet Muhammad (SAW)", c: "The final Messenger, recipient of the Quran, and a mercy for all mankind." }
        ];

        const prayersData = [
            { t: "Iftar Dua", a: "Ø°ÙŽÙ‡ÙŽØ¨ÙŽ Ø§Ù„Ø¸ÙŽÙ‘Ù…ÙŽØ£Ù ÙˆÙŽØ§Ø¨Ù’ØªÙŽÙ„ÙŽÙ‘ØªÙ Ø§Ù„Ù’Ø¹ÙØ±ÙÙˆÙ‚Ù ÙˆÙŽØ«ÙŽØ¨ÙŽØªÙŽ Ø§Ù„Ø£ÙŽØ¬Ù’Ø±Ù Ø¥ÙÙ†Ù’ Ø´ÙŽØ§Ø¡ÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù", e: "Dhahaba-zamaâ€™u wab-tallatil â€˜uruuqu, wa thabatal ajru in sha Allah", m: "Thirst is gone, the veins are wetted, and the reward is confirmed, if Allah wills." },
            { t: "Opening Fast", a: "ÙˆÙŽØ¨ÙØµÙŽÙˆÙ’Ù…Ù ØºÙŽØ¯Ù Ù†ÙŽÙ‘ÙˆÙŽÙŠÙ’ØªÙ Ù…ÙÙ†Ù’ Ø´ÙŽÙ‡Ù’Ø±Ù Ø±ÙŽÙ…ÙŽØ¶ÙŽØ§Ù†ÙŽ", e: "Wa bisawmi ghadinn nawaiytu min shahri ramadan", m: "I intend to keep the fast for tomorrow in the month of Ramadan." },
            { t: "Before Sleeping", a: "Ø¨ÙØ§Ø³Ù’Ù…ÙÙƒÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡ÙÙ…ÙŽÙ‘ Ø£ÙŽÙ…ÙÙˆØªÙ ÙˆÙŽØ£ÙŽØ­Ù’ÙŠÙŽØ§", e: "Bismika Allahumma amutu wa ahya", m: "In Your name, O Allah, I die and I live." },
            { t: "Waking Up", a: "Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙŽÙ‘Ù‡Ù Ø§Ù„ÙŽÙ‘Ø°ÙÙŠ Ø£ÙŽØ­Ù’ÙŠÙŽØ§Ù†ÙŽØ§ Ø¨ÙŽØ¹Ù’Ø¯ÙŽ Ù…ÙŽØ§ Ø£ÙŽÙ…ÙŽØ§ØªÙŽÙ†ÙŽØ§ ÙˆÙŽØ¥ÙÙ„ÙŽÙŠÙ’Ù‡Ù Ø§Ù„Ù†ÙÙ‘Ø´ÙÙˆØ±Ù", e: "Alhamdu lillahil-ladhi ahyana...", m: "Praise be to Allah who gave us life after He caused us to die and to Him is the resurrection." }
        ];

        const quotes = [
            "Fasting is a shield; it will protect you from the fire.",
            "Ramadan is the month whose beginning is mercy, its middle is forgiveness and its end is freedom from the fire.",
            "He who gives iftar to another fasting person shall fully earn the same reward.",
            "The best charity is that given in Ramadan.",
            "The smell of the mouth of a fasting person is better to Allah than the scent of musk.",
            "Fasting is not just abstaining from food; it is abstaining from foul talk and anger.",
            "Ramadan is a time to detach from the world and attach to Allah.",
            "The Quran was revealed in this month as a guidance for all people.",
            "Laylatul Qadr is better than a thousand months.",
            "Whoever fasts Ramadan out of faith and seeking reward, his past sins will be forgiven.",
            "Take Suhoor, for in Suhoor there is blessing.",
            "A fasting person has at the time of breaking his fast a prayer which is not rejected.",
            "Ramadan is the spring of the soul.",
            "Let your fast be seen in your character, not just your hunger.",
            "When Ramadan begins, the gates of Paradise are opened and the gates of Hell are closed.",
            "Ramadan is a bootcamp for the soul to gain Taqwa.",
            "Be like a rain-bearing cloud; generous and beneficial in this holy month.",
            "Prayer is the key to all success; keep it strong in Ramadan.",
            "The heart that remembers Allah is never lonely.",
            "Kindness is a mark of faith, and whoever has no kindness has no faith.",
            "Allah does not look at your appearance, but at your hearts and deeds.",
            "Patience is half of faith, and fasting is half of patience.",
            "Seek knowledge from the cradle to the grave.",
            "The best of people are those who are most beneficial to others.",
            "Ramadan is about changing your heart, not just your schedule.",
            "Every act of goodness is a charity.",
            "Control your tongue as much as you control your stomach.",
            "Gratitude turns what we have into enough.",
            "Turn to Allah before you return to Allah.",
            "The goal of Ramadan is to become a better version of yourself for the rest of the year."
        ];

        const fullQuizData = [
            { q: "How many chapters (Surahs) are in the Quran?", o: ["110", "114", "120", "116"], a: 1 },
            { q: "Which Prophet is mentioned most in the Quran?", o: ["Ibrahim", "Isa", "Musa", "Muhammad"], a: 2 },
            { q: "What is the name of the cave where the Quran was first revealed?", o: ["Thawr", "Hira", "Uhud", "Safa"], a: 1 },
            { q: "Which Surah is known as the 'Heart of the Quran'?", o: ["Al-Fatiha", "Yasin", "Ar-Rahman", "Al-Mulk"], a: 1 },
            { q: "How many Sajdahs (prostrations) are in the Quran?", o: ["12", "14", "15", "10"], a: 1 },
            { q: "Which Prophet could speak to animals and control wind?", o: ["Dawud", "Sulaiman", "Musa", "Yusuf"], a: 1 },
            { q: "What is the pre-dawn meal before fasting called?", o: ["Iftar", "Suhoor", "Walima", "Zakat"], a: 1 },
            { q: "In which year of the Hijra was fasting made obligatory?", o: ["1st", "2nd", "3rd", "5th"], a: 1 },
            { q: "What is the name of the gate in Jannah for those who fast?", o: ["Ar-Rayyan", "Al-Kawthar", "Baab as-Salaat", "Baab al-Iman"], a: 0 },
            { q: "Which battle took place during Ramadan in the 2nd year of Hijra?", o: ["Uhud", "Khandaq", "Badr", "Tabuk"], a: 2 },
            { q: "How many months are in the Islamic calendar?", o: ["10", "12", "13", "11"], a: 1 },
            { q: "Which angel is the gatekeeper of Hell?", o: ["Mikaeel", "Malik", "Ridwan", "Israfeel"], a: 1 },
            { q: "Who was the first woman to embrace Islam?", o: ["Aisha", "Khadija", "Fatima", "Sawda"], a: 1 },
            { q: "Which Prophet was swallowed by a large fish/whale?", o: ["Yunus", "Yusuf", "Idris", "Lut"], a: 0 },
            { q: "How many times a day do Muslims pray?", o: ["3", "4", "5", "6"], a: 2 },
            { q: "What is the first month of the Islamic calendar?", o: ["Ramadan", "Muharram", "Safar", "Rajab"], a: 1 },
            { q: "Which Surah is the longest in the Quran?", o: ["Al-Imran", "Al-Baqarah", "An-Nisa", "Al-Ma'idah"], a: 1 },
            { q: "Which companion was nicknamed 'As-Siddiq'?", o: ["Umar", "Ali", "Abu Bakr", "Uthman"], a: 2 },
            { q: "How many years did the Quran take to be fully revealed?", o: ["10", "23", "40", "13"], a: 1 },
            { q: "Which Surah is equivalent to 1/3 of the Quran?", o: ["Al-Fatiha", "Al-Ikhlas", "Al-Falaq", "An-Nas"], a: 1 },
            { q: "What is the direction of prayer called?", o: ["Mihrab", "Minbar", "Qibla", "Kaaba"], a: 2 },
            { q: "Which Prophet was sent to the people of Thamud?", o: ["Salih", "Hud", "Shu'ayb", "Nuh"], a: 0 },
            { q: "What is the name of the night the Quran was revealed?", o: ["Laylatul Qadr", "Laylatul Mi'raj", "Laylatul Bara'ah", "Eid Night"], a: 0 },
            { q: "How many pillars of Islam are there?", o: ["3", "4", "5", "6"], a: 2 },
            { q: "Who was the first Muezzin in Islam?", o: ["Abu Bakr", "Umar", "Bilal ibn Rabah", "Salman al-Farsi"], a: 2 },
            { q: "Which city is known as the city of the Prophet?", o: ["Mecca", "Medina", "Jerusalem", "Taif"], a: 1 },
            { q: "What is the special prayer during Ramadan nights?", o: ["Tahajjud", "Taraweeh", "Ishraq", "Witr"], a: 1 },
            { q: "Which Prophet built the Ark?", o: ["Idris", "Ibrahim", "Nuh", "Musa"], a: 2 },
            { q: "What is the Zakat given at the end of Ramadan called?", o: ["Zakat al-Maal", "Zakat al-Fitr", "Sadaqah", "Ushr"], a: 1 },
            { q: "Which Prophet's name is mentioned only 4 times in the Quran?", o: ["Musa", "Isa", "Muhammad", "Ibrahim"], a: 2 },
            { q: "What is the Arabic word for fasting?", o: ["Salat", "Sawm", "Hajj", "Zakat"], a: 1 },
            { q: "Which companion is mentioned by name in the Quran?", o: ["Abu Bakr", "Umar", "Zaid bin Harithah", "Ali"], a: 2 },
            { q: "Which Surah does not start with Bismillah?", o: ["An-Nisa", "At-Tawbah", "Al-Kahf", "Al-Baqarah"], a: 1 },
            { q: "How many gates does Jannah have?", o: ["7", "8", "9", "10"], a: 1 },
            { q: "How many gates does Hell have?", o: ["7", "8", "9", "6"], a: 0 },
            { q: "Which Prophet was born without a father?", o: ["Musa", "Isa", "Yahya", "Zakariyya"], a: 1 },
            { q: "What is the name of the sacred water in Mecca?", o: ["Kauthar", "Zamzam", "Salsabil", "Tasnim"], a: 1 },
            { q: "Who will blow the trumpet on the Day of Judgment?", o: ["Jibril", "Mikaeel", "Israfeel", "Izraeel"], a: 2 },
            { q: "Which metal is mentioned in the Quran as being sent down?", o: ["Gold", "Silver", "Iron", "Copper"], a: 2 },
            { q: "What is the name of the mountain where Musa spoke to Allah?", o: ["Tur Sinai", "Arafat", "Safa", "Marwa"], a: 1 },
            { q: "How many daughters did the Prophet (SAW) have?", o: ["1", "2", "3", "4"], a: 3 },
            { q: "In which city is Al-Aqsa Mosque located?", o: ["Cairo", "Jerusalem", "Mecca", "Medina"], a: 1 },
            { q: "What is the Arabic word for the oneness of Allah?", o: ["Taqwa", "Tawhid", "Ikhlas", "Iman"], a: 1 },
            { q: "Which Prophet had a twin brother named Al-Ays?", o: ["Ismail", "Ishaq", "Yaqub", "Yusuf"], a: 2 },
            { q: "What is the first word revealed in the Quran?", o: ["Allah", "Qul", "Iqra", "Subhan"], a: 2 },
            { q: "Which Surah is called 'The Mother of the Book'?", o: ["Al-Baqarah", "Al-Ikhlas", "Al-Fatiha", "Al-Kahf"], a: 2 },
            { q: "How many Takbirs are in the first Rakat of Eid prayer?", o: ["3", "5", "7", "6"], a: 2 },
            { q: "Which Prophet was famous for his patience during illness?", o: ["Ayyub", "Yunus", "Zakariyya", "Yahya"], a: 0 },
            { q: "What is the name of the scale used on Judgment Day?", o: ["Sirat", "Mizan", "Kauthar", "Arsh"], a: 1 },
            { q: "Who is the gatekeeper of Jannah?", o: ["Malik", "Ridwan", "Jibril", "Mikaeel"], a: 1 }
        ];

        let count = 0; 
        let qIdx = 0; 
        let score = 0;

        function navigateTo(pageId) {
            document.querySelectorAll('.page-section').forEach(p => p.classList.add('hidden'));
            document.getElementById('page-' + pageId).classList.remove('hidden');
            document.querySelectorAll('.nav-btn').forEach(b => {
                b.classList.remove('active', 'text-emerald-900');
                b.classList.add('text-slate-400');
            });
            const activeBtn = Array.from(document.querySelectorAll('.nav-btn')).find(b => b.getAttribute('onclick').includes(pageId));
            if(activeBtn) {
                activeBtn.classList.add('active', 'text-emerald-900');
                activeBtn.classList.remove('text-slate-400');
            }
            window.scrollTo(0, 0);
        }

        function populateUI() {
            const namesG = document.getElementById('names-grid');
            namesG.innerHTML = '';
            names99.forEach((n, idx) => {
                namesG.innerHTML += `
                    <div class="glass-card p-4 rounded-xl text-center border-b-2 border-emerald-100">
                        <span class="text-[10px] text-emerald-400 font-bold">#${idx + 1}</span>
                        <h4 class="arabic-text text-xl font-bold text-emerald-800 my-1">${n.a}</h4>
                        <p class="text-[10px] font-bold text-slate-500 uppercase tracking-tighter">${n.e}</p>
                    </div>`;
            });

            const adhkL = document.getElementById('adhkar-list');
            adhkL.innerHTML = '';
            adhkarData.forEach(a => {
                adhkL.innerHTML += `
                    <div class="glass-card p-5 rounded-2xl space-y-2 border-l-4 border-emerald-500">
                        <div class="flex justify-between items-start">
                            <span class="text-[10px] font-bold text-emerald-600 uppercase tracking-widest">${a.e}</span>
                        </div>
                        <p class="arabic-text text-2xl text-emerald-900 font-bold leading-loose">${a.a}</p>
                        <p class="text-xs font-medium text-slate-500">${a.m}</p>
                    </div>`;
            });

            const storyL = document.getElementById('stories-list');
            storyL.innerHTML = '';
            storiesData.forEach(s => {
                storyL.innerHTML += `
                    <div class="glass-card p-5 rounded-2xl border-l-4 border-blue-500">
                        <h4 class="font-bold text-slate-800">${s.t}</h4>
                        <p class="text-xs text-slate-500 mt-2 leading-relaxed">${s.c}</p>
                    </div>`;
            });

            const prayL = document.getElementById('prayers-list');
            prayL.innerHTML = '';
            prayersData.forEach(p => {
                prayL.innerHTML += `
                    <div class="glass-card p-5 rounded-2xl space-y-3 border-l-4 border-red-500">
                        <h4 class="font-bold text-slate-800">${p.t}</h4>
                        <p class="arabic-text text-xl text-emerald-900 font-bold leading-relaxed">${p.a}</p>
                        <p class="text-[10px] italic text-slate-400">${p.e}</p>
                        <p class="text-xs font-medium text-slate-600 bg-slate-50 p-3 rounded-lg">${p.m}</p>
                    </div>`;
            });
        }

        async function askGemini() {
            const input = document.getElementById('ai-input');
            const resDiv = document.getElementById('ai-response');
            const query = input.value.trim();
            if (!query) return;

            document.getElementById('btn-text').classList.add('hidden');
            document.getElementById('btn-loader').classList.remove('hidden');
            resDiv.classList.remove('hidden');
            resDiv.innerText = "Connecting with Counselor...";

            const url = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: query }] }],
                systemInstruction: { parts: [{ text: "You are a kind, wise Islamic spiritual counselor. Provide authentic, encouraging, and brief responses based on Quran and Sunnah. Start with a warm greeting." }] }
            };

            const fetchWithRetry = async (retries = 5) => {
                const delays = [1000, 2000, 4000, 8000, 16000];
                for (let i = 0; i <= retries; i++) {
                    try {
                        const response = await fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                        if (response.ok) {
                            const data = await response.json();
                            return data.candidates?.[0]?.content?.parts?.[0]?.text;
                        }
                        if (i === retries) throw new Error("Connection failed");
                        await new Promise(r => setTimeout(r, delays[i]));
                    } catch (err) { if (i === retries) throw err; await new Promise(r => setTimeout(r, delays[i])); }
                }
            };

            try {
                const result = await fetchWithRetry();
                resDiv.innerText = result || "Counselor is currently reflecting. Please try again.";
            } catch (err) {
                resDiv.innerText = "Peace be upon you. The counselor is unavailable right now. Please try again in a few moments.";
            } finally {
                document.getElementById('btn-text').classList.remove('hidden');
                document.getElementById('btn-loader').classList.add('hidden');
            }
        }

        function newQuote() {
            const q = quotes[Math.floor(Math.random() * quotes.length)];
            document.getElementById('quote-display').innerText = `"${q}"`;
        }

        function incrementTasbeeh() {
            count++;
            document.getElementById('tasbeeh-count').innerText = count;
        }

        function resetTasbeeh() {
            count = 0;
            document.getElementById('tasbeeh-count').innerText = 0;
        }

        function startQuiz() {
            document.getElementById('quiz-intro').classList.add('hidden');
            document.getElementById('quiz-game').classList.remove('hidden');
            document.getElementById('quiz-result').classList.add('hidden');
            qIdx = 0; score = 0; showQuestion();
        }

        function showQuestion() {
            const q = fullQuizData[qIdx];
            document.getElementById('quiz-progress-text').innerText = `Question ${qIdx + 1}/50`;
            document.getElementById('quiz-score-live').innerText = `Score: ${score}`;
            document.getElementById('quiz-question').innerText = q.q;
            const optionsDiv = document.getElementById('quiz-options');
            optionsDiv.innerHTML = '';
            q.o.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = "p-4 text-left border border-slate-200 rounded-xl hover:bg-indigo-50 hover:border-indigo-200 font-medium transition-all active:scale-[0.98]";
                btn.innerText = opt;
                btn.onclick = () => handleAnswer(idx);
                optionsDiv.appendChild(btn);
            });
        }

        function handleAnswer(idx) {
            if (idx === fullQuizData[qIdx].a) score++;
            qIdx++;
            if (qIdx < fullQuizData.length) showQuestion();
            else showQuizResult();
        }

        function showQuizResult() {
            document.getElementById('quiz-game').classList.add('hidden');
            document.getElementById('quiz-result').classList.remove('hidden');
            document.getElementById('final-score').innerText = `${score}/50`;
        }

        function shareToWhatsApp(type) {
            let text = "";
            if(type === 'wisdom') {
                text = `ðŸŒ™ *Ramadan 360 Daily Wisdom*:\n\n${document.getElementById('quote-display').innerText}\n\nJoin me in this blessed month!`;
            } else {
                text = `ðŸ† *Ramadan 360 Quiz Score*:\n\nI just finished the 50-question Islamic Quiz and scored *${score}/50*! \n\nCan you beat my score? Download Ramadan 360 now! ðŸŒ™`;
            }
            window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
        }

        function renderTracker() {
            const grid = document.getElementById('days-grid');
            const data = JSON.parse(localStorage.getItem('fast_track_v4') || '{}');
            let completed = 0; grid.innerHTML = '';
            for(let i=1; i<=30; i++) {
                if(data[i]) completed++;
                const d = document.createElement('div');
                d.className = `h-10 flex items-center justify-center rounded-lg font-bold border cursor-pointer transition-all ${data[i] ? 'bg-amber-400 text-white border-amber-500 scale-105' : 'bg-white text-slate-400 hover:bg-slate-50'}`;
                d.innerText = i; 
                d.onclick = () => { 
                    data[i] = !data[i]; 
                    localStorage.setItem('fast_track_v4', JSON.stringify(data)); 
                    renderTracker(); 
                };
                grid.appendChild(d);
            }
            document.getElementById('tracker-stats').innerText = `${completed}/30 Days`;
            document.getElementById('tracker-bar').style.width = `${(completed/30)*100}%`;
        }

        window.onload = () => {
            populateUI();
            renderTracker();
            setInterval(() => {
                document.getElementById('live-time').innerText = new Date().toLocaleTimeString();
            }, 1000);
        };
    </script>
</body>
</html>
